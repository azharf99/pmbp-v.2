{% load static %}
<header class="bg-blue-500 dark:bg-gray-800 ring-2 ring-blue-500 dark:ring-gray-800 w-full z-20 sticky left-0 top-0">
  <nav class="mx-2 backdrop-blur-sm flex items-center justify-between p-2 lg:px-8"
    aria-label="Global">
    <div class="flex lg:flex-1">
      <a href="{% url 'home' %}" class="-m-1.5 p-1.5">
        <span class="sr-only">PIKET - SMAS IT AL BINAA</span>
        <img class="" src="{% static 'images/Binaaul-Mustaqbal.png' %}" alt="Logo" height="50px" width="50px" />
      </a>
    </div>
    <div class="flex lg:hidden items-center">
      <label for="AcceptConditions2"
        class="relative inline-block h-6 w-12 cursor-pointer rounded-full bg-gray-300 transition [-webkit-tap-highlight-color:_transparent] has-[:checked]:bg-green-500">
        <label for="AcceptConditions2"></label><input type="checkbox" id="AcceptConditions2"
          class="peer sr-only [&:checked_+_span_svg[data-checked-icon]]:block [&:checked_+_span_svg[data-unchecked-icon]]:hidden" />

        <span
          class="absolute inset-y-0 start-0 z-10 m-1 inline-flex size-4 items-center justify-center rounded-full bg-white dark:bg-green-300 p-0.5 text-black transition-all peer-checked:start-6 peer-checked:text-black">
          <svg data-unchecked-icon xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" fill-rule="evenodd" clip-rule="evenodd"
              d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
          </svg>
          <svg data-checked-icon xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6 hidden">
            <path stroke-linecap="round" stroke-linejoin="round" fill-rule="evenodd" clip-rule="evenodd"
              d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" />
          </svg>
        </span>
      </label>
      {% if request.user.is_authenticated %}
      <div class="px-4 relative">
        <button class="mx-2 rounded-full border-2 border-white mr-4 dark:border-fuchsia-400" id="avatar">
          <div>
            <img class="rounded-full" src="{% static 'images/blank-profile.png' %}" alt="Profile" height="25px" width="25px" />
          </div>
        </button>
        <div class="absolute grid my-2 z-10 left-0 p-2 bg-white dark:bg-gray-800 rounded-md hidden w-full" id="user_menu">
          <a href="{% url 'profile' %}" class="p-1 my-2 text-xs font-semibold hover:text-blue-700">Profile</a>
          <form action="{% url 'logout' %}" method="post" class="hover:bg-indigo-200 dark:hover:bg-gray-700 rounded-lg">
            {% csrf_token %}
            <input type="submit" value="Keluar &rarr;" class="text-xs p-1 text-red-500 font-semibold leading-6 py-1 cursor-pointer">
          </form>
        </div>
      </div>
      {% else %}
      <a href="{% url 'home' %}" class="mx-4 text-sm font-semibold leading-6 text-gray-100 px-2 border rounded-md">Home</a>
      <a href="{% url 'login' %}" class="mx-2 text-sm font-semibold leading-6 text-gray-100 px-2">
        <span aria-hidden="true">Log in &rarr;</span></a>
      {% endif %}
      <button type="button" class="-m-2.5 items-center justify-center rounded-md p-2.5 text-gray-700"
        id="openMobileNav">
        <span class="sr-only">Open main menu</span>
      </button>
      <button type="button" class="hidden -m-2.5 items-center justify-center rounded-md p-2.5 text-gray-700"
        id="closeMobileNav">
        <span class="sr-only">Close main menu</span>
      </button>
    </div>

    <div class="hidden lg:flex lg:flex-1 lg:justify-end items-center">
      <label for="AcceptConditions"
        class="relative inline-block h-6 w-12 cursor-pointer rounded-full bg-gray-300 transition [-webkit-tap-highlight-color:_transparent] has-[:checked]:bg-green-500">
        <label for="AcceptConditions"></label><input type="checkbox" id="AcceptConditions"
          class="peer sr-only [&:checked_+_span_svg[data-checked-icon]]:block [&:checked_+_span_svg[data-unchecked-icon]]:hidden" />

        <span
          class="absolute inset-y-0 start-0 z-10 m-1 inline-flex size-4 items-center justify-center rounded-full bg-white dark:bg-green-300 p-0.5 text-black transition-all peer-checked:start-6 peer-checked:text-black">
          <svg data-unchecked-icon xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" fill-rule="evenodd" clip-rule="evenodd"
              d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
          </svg>
          <svg data-checked-icon xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6 hidden">
            <path stroke-linecap="round" stroke-linejoin="round" fill-rule="evenodd" clip-rule="evenodd"
              d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" />
          </svg>
        </span>
      </label>
      {% if request.user.is_authenticated %}
      <div class="px-4 relative">
        <button class="mx-4 rounded-full border-2 border-white mr-4 dark:border-fuchsia-400" id="avatar2">
          <div>
            <img class="rounded-full" src="{% static 'images/blank-profile.png' %}" alt="Profile" height="25px" width="25px" />
          </div>
        </button>
        <div class="absolute grid my-2 z-10 left-0 p-2 bg-white dark:bg-gray-800 rounded-md hidden w-full" id="user_menu2">
          <a href="{% url 'profile' %}" class="p-1 my-2 text-xs font-semibold hover:text-blue-700">Profile</a>
          <form action="{% url 'logout' %}" method="post" class="hover:bg-indigo-200 dark:hover:bg-gray-700 rounded-lg">
            {% csrf_token %}
            <input type="submit" value="Keluar &rarr;" class="text-xs p-1 text-red-500 font-semibold leading-6 py-1 cursor-pointer">
          </form>
        </div>
      </div>
      {% else %}
      <a href="{% url 'home' %}" class="mx-4 text-sm font-semibold leading-6 text-gray-100 px-2 border rounded-md">Home</a>
      <a href="{% url 'login' %}" class="text-sm font-semibold leading-6 text-gray-100 px-2">Masuk
        <span aria-hidden="true">&rarr;</span></a>
      {% endif %}
    </div>
  </nav>
</header>


<script>
  const avatar = document.getElementById("avatar");
  const user_menu = document.getElementById("user_menu");
  if (avatar){
    avatar.addEventListener("click", ()=>{
        user_menu.classList.toggle("hidden")
    })
  }
  const avatar2 = document.getElementById("avatar2");
  const user_menu2 = document.getElementById("user_menu2");
  if (avatar2){
    avatar2.addEventListener("click", ()=>{
        user_menu2.classList.toggle("hidden")
    })
  }
</script>