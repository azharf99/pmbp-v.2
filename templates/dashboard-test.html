
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Dashboard</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom scrollbar for sidebar - cannot be fully converted to Tailwind */
        .sidebar-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .sidebar-scroll::-webkit-scrollbar-track {
            background: #e2e8f0; /* Light blue-gray track */
            border-radius: 10px;
        }
        .sidebar-scroll::-webkit-scrollbar-thumb {
            background: #94a3b8; /* Darker blue-gray thumb */
            border-radius: 10px;
        }
        .sidebar-scroll::-webkit-scrollbar-thumb:hover {
            background: #64748b; /* Even darker on hover */
        }

        /* General sidebar transition */
        .sidebar-transition {
            transition: width 0.6s ease-in-out, transform 0.6s ease-in-out;
        }

        /* Desktop specific sidebar styles */
        @media (min-width: 768px) {
            .sidebar-desktop {
                width: 16rem; /* Default expanded width */
                position: relative; /* Not fixed on desktop */
                transform: translateX(0); /* Always visible on desktop */
                flex-shrink: 0; /* Prevents shrinking */
            }
            .sidebar-desktop.collapsed {
                width: 5rem; /* Collapsed width */
            }
            .sidebar-desktop.collapsed .sidebar-text {
                opacity: 0;
                width: 0;
            }
            .sidebar-desktop.collapsed .sidebar-icon {
                margin-right: 0 !important;
            }
            .sidebar-desktop.collapsed .sidebar-item-link {
                justify-content: center;
            }

            /* Main content margin for desktop */
            .main-content-desktop {
                transition: margin-left 0.3s ease-in-out;
            }
        }

        /* Mobile specific styles */
        @media (max-width: 767px) {
            .sidebar-mobile {
                position: fixed;
                height: 100vh;
                z-index: 50;
                left: 0;
                top: 0;
                width: 16rem; /* Full width when open */
                transform: translateX(-100%); /* Hidden by default */
                box-shadow: 2px 0 5px rgba(0,0,0,0.2);
            }
            .sidebar-mobile.active {
                transform: translateX(0); /* Show when active */
            }
            /* Ensure text is always visible on mobile */
            .sidebar-mobile .sidebar-text {
                opacity: 1;
                width: auto;
            }
            .sidebar-mobile .sidebar-icon {
                margin-right: 0.75rem; /* mr-3 */
            }
            /* Main content should not have left margin on mobile */
            .main-content-mobile {
                margin-left: 0 !important;
            }
        }

        /* Overlay activation */
        .overlay.active {
            display: block;
        }

        /* Dropdown menu activation */
        .dropdown-menu.active {
            display: block;
        }

        /* Keyframes for dropdown animation */
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
    </style>
</head>
<body class="flex min-h-screen font-sans bg-[#f0f2f5] dark:bg-gray-900 dark:text-gray-100">

    <!-- Overlay for mobile sidebar -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden md:hidden"></div>

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar-transition bg-gradient-to-br from-blue-700 to-blue-900 text-white shadow-lg flex flex-col rounded-tr-lg rounded-br-lg p-4">
        <div class="flex items-center justify-between py-6 border-b border-blue-600/50 relative">
            <h1 class="text-3xl font-bold tracking-wide transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">EduManage</h1>
            <!-- Close button for mobile sidebar -->
            <button id="close-sidebar-btn" class="md:hidden p-2 text-white hover:bg-blue-600 rounded-full absolute right-4">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <!-- Desktop collapse/expand button -->
            <button id="desktop-sidebar-toggle-btn" class="hidden md:block p-2 text-white hover:bg-blue-600 rounded-full absolute right-4">
                <i data-lucide="chevron-left" class="w-6 h-6" id="desktop-sidebar-toggle-icon-left"></i>
                <i data-lucide="chevron-right" class="w-6 h-6" id="desktop-sidebar-toggle-icon-right"></i>
            </button>
        </div>
        <nav class="mt-8 flex-grow sidebar-scroll overflow-y-auto pr-2">
            <ul>
                <li class="mb-2">
                    <a href="#" class="sidebar-item-link flex items-center p-3 text-lg font-medium rounded-lg bg-blue-600 text-white shadow-md transition-all duration-200 hover:bg-blue-500">
                        <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Dashboard</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="users" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Alumni</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="calendar" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Attendance</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="book" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Blogs</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="school" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Classes</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="book-open" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Courses</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="activity" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Extracurriculars</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="image" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Galleries</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="award" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Grades</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="lock" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Private</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="folder" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Projects</span>
                    </a>
                </li>
                 <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="users" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Raker</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="file-text" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Reports</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="calendar-check" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Schedules</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="graduation-cap" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Students</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" class="flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                        <i data-lucide="briefcase" class="w-5 h-5 mr-3 sidebar-icon"></i>
                        <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Teachers</span>
                    </a>
                </li>
            </ul>
        </nav>
        <div class="mt-auto py-4 border-t border-blue-600/50">
            <a href="#" class="sidebar-item-link flex items-center p-3 text-lg font-medium rounded-lg text-blue-100 transition-all duration-200 hover:bg-blue-700 hover:text-white">
                <i data-lucide="log-out" class="w-5 h-5 mr-3 sidebar-icon"></i>
                <span class="transition-opacity duration-100 ease-in-out whitespace-nowrap overflow-hidden sidebar-text">Logout</span>
            </a>
        </div>
    </aside>

    <!-- Main Content Area -->
    <div id="main-content" class="flex-1 flex flex-col p-6 overflow-hidden">
        <!-- Top Bar -->
        <header class="flex items-center justify-between bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md mb-6">
            <div class="flex items-center">
                <!-- Hamburger menu for mobile -->
                <button id="sidebar-toggle-btn" class="md:hidden p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 mr-4">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
                <h2 class="text-2xl font-semibold text-gray-800 dark:text-gray-100">Dashboard Overview</h2>
            </div>
            <div class="flex items-center space-x-4 relative">
                <!-- Dark Mode Toggle Button -->
                <button id="dark-mode-toggle" class="p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200">
                    <i data-lucide="moon" class="w-6 h-6" id="dark-mode-icon"></i>
                </button>

                <button id="notifications-bell-btn" class="relative p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200">
                    <i data-lucide="bell" class="w-6 h-6"></i>
                    <span class="absolute top-1 right-1 block w-3 h-3 bg-red-500 rounded-full ring-2 ring-white dark:ring-gray-800"></span>
                </button>
                <div id="user-avatar-container" class="flex items-center space-x-2 cursor-pointer relative">
                    <img src="https://placehold.co/40x40/6366f1/ffffff?text=AD" alt="User Avatar" class="w-10 h-10 rounded-full border-2 border-indigo-500">
                    <span class="font-medium text-gray-700 dark:text-gray-200 hidden md:block">Admin User</span>

                    <!-- User Dropdown Menu -->
                    <div id="user-dropdown" class="absolute top-full mt-2 right-0 w-48 bg-white dark:bg-gray-700 rounded-xl shadow-lg z-50 hidden origin-top-right animate-fadeInScale p-2">
                        <ul>
                            <li>
                                <a href="#" class="flex items-center p-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors duration-200">
                                    <i data-lucide="settings" class="w-5 h-5 mr-2"></i>
                                    Settings
                                </a>
                            </li>
                            <li>
                                <a href="#" class="flex items-center p-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors duration-200">
                                    <i data-lucide="log-out" class="w-5 h-5 mr-2"></i>
                                    Logout
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Notifications Dropdown -->
                <div id="notifications-dropdown" class="absolute top-full mt-2 right-0 w-80 bg-white dark:bg-gray-700 rounded-xl shadow-lg z-50 hidden origin-top-right animate-fadeInScale p-4 max-h-96 overflow-y-auto">
                    <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3">Notifications</h3>
                    <div class="space-y-3">
                        <div class="flex items-start p-2 bg-blue-50 dark:bg-blue-900 rounded-lg border border-blue-200 dark:border-blue-700">
                            <div class="p-1 bg-blue-100 dark:bg-blue-800 rounded-full text-blue-600 dark:text-blue-300 mr-2">
                                <i data-lucide="info" class="w-4 h-4"></i>
                            </div>
                            <div>
                                <p class="text-gray-800 dark:text-gray-100 font-medium text-sm">System Update Scheduled</p>
                                <p class="text-gray-600 dark:text-gray-300 text-xs">Expected downtime on July 20, 2025, from 1 AM to 3 AM.</p>
                            </div>
                        </div>
                        <div class="flex items-start p-2 bg-yellow-50 dark:bg-yellow-900 rounded-lg border border-yellow-200 dark:border-yellow-700">
                            <div class="p-1 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-300 mr-2">
                                <i data-lucide="bell" class="w-4 h-4"></i>
                            </div>
                            <div>
                                <p class="text-gray-800 dark:text-gray-100 font-medium text-sm">New Announcement: School Holiday</p>
                                <p class="text-gray-600 dark:text-gray-300 text-xs">School will be closed on July 17, 2025, for a national holiday.</p>
                            </div>
                        </div>
                        <div class="flex items-start p-2 bg-green-50 dark:bg-green-900 rounded-lg border border-green-200 dark:border-green-700">
                            <div class="p-1 bg-green-100 dark:bg-green-800 rounded-full text-green-600 dark:text-green-300 mr-2">
                                <i data-lucide="check-circle" class="w-4 h-4"></i>
                            </div>
                            <div>
                                <p class="text-gray-800 dark:text-gray-100 font-medium text-sm">Data Backup Completed</p>
                                <p class="text-gray-600 dark:text-gray-300 text-xs">Daily database backup successfully completed on July 10, 2025.</p>
                            </div>
                        </div>
                         <div class="flex items-start p-2 bg-red-50 dark:bg-red-900 rounded-lg border border-red-200 dark:border-red-700">
                            <div class="p-1 bg-red-100 dark:bg-red-800 rounded-full text-red-600 dark:text-red-300 mr-2">
                                <i data-lucide="alert-triangle" class="w-4 h-4"></i>
                            </div>
                            <div>
                                <p class="text-gray-800 dark:text-gray-100 font-medium text-sm">Urgent: Fee Payment Overdue</p>
                                <p class="text-gray-600 dark:text-gray-300 text-xs">Reminder for outstanding fees due by July 15, 2025.</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <a href="#" class="text-indigo-600 hover:underline text-sm font-medium dark:text-indigo-400">View All Notifications</a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Dashboard Cards -->
        <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
            <!-- Card 1: Total Students -->
            <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md flex items-center justify-between transform transition-transform duration-200 hover:scale-105">
                <div>
                    <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Total Students</p>
                    <h3 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mt-1">1,250</h3>
                </div>
                <div class="p-3 bg-blue-100 dark:bg-blue-900 rounded-full text-blue-600 dark:text-blue-300">
                    <i data-lucide="users" class="w-8 h-8"></i>
                </div>
            </div>

            <!-- Card 2: Total Teachers -->
            <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md flex items-center justify-between transform transition-transform duration-200 hover:scale-105">
                <div>
                    <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Total Teachers</p>
                    <h3 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mt-1">75</h3>
                </div>
                <div class="p-3 bg-green-100 dark:bg-green-900 rounded-full text-green-600 dark:text-green-300">
                    <i data-lucide="user-check" class="w-8 h-8"></i>
                </div>
            </div>

            <!-- Card 3: Active Classes -->
            <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md flex items-center justify-between transform transition-transform duration-200 hover:scale-105">
                <div>
                    <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Active Classes</p>
                    <h3 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mt-1">42</h3>
                </div>
                <div class="p-3 bg-yellow-100 dark:bg-yellow-900 rounded-full text-yellow-600 dark:text-yellow-300">
                    <i data-lucide="school" class="w-8 h-8"></i>
                </div>
            </div>

            <!-- Card 4: Events This Week -->
            <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md flex items-center justify-between transform transition-transform duration-200 hover:scale-105">
                <div>
                    <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Events This Week</p>
                    <h3 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mt-1">5</h3>
                </div>
                <div class="p-3 bg-red-100 dark:bg-red-900 rounded-full text-red-600 dark:text-red-300">
                    <i data-lucide="calendar-days" class="w-8 h-8"></i>
                </div>
            </div>
        </section>

        <!-- Charts and Recent Activities -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6 flex-grow">
            <!-- Student Attendance Chart -->
            <div class="lg:col-span-2 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md flex flex-col">
                <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4">Student Attendance Overview</h3>
                <div class="h-64">
                    <canvas id="attendanceChart"></canvas>
                </div>
            </div>

            <!-- Recent Activities -->
            <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md flex flex-col">
                <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4">Recent Activities</h3>
                <div class="space-y-4 overflow-y-auto h-64 sidebar-scroll pr-2">
                    <div class="flex items-start">
                        <div class="p-2 bg-indigo-100 dark:bg-indigo-900 rounded-full text-indigo-600 dark:text-indigo-300 mr-3">
                            <i data-lucide="plus-circle" class="w-4 h-4"></i>
                        </div>
                        <div>
                            <p class="text-gray-800 dark:text-gray-100 font-medium">New student "Alice Smith" enrolled.</p>
                            <p class="text-gray-500 dark:text-gray-300 text-sm">2 hours ago</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <div class="p-2 bg-green-100 dark:bg-green-900 rounded-full text-green-600 dark:text-green-300 mr-3">
                            <i data-lucide="check-circle" class="w-4 h-4"></i>
                        </div>
                        <div>
                            <p class="text-gray-800 dark:text-gray-100 font-medium">Math exam results published.</p>
                            <p class="text-gray-500 dark:text-gray-300 text-sm">Yesterday</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <div class="p-2 bg-yellow-100 dark:bg-yellow-900 rounded-full text-yellow-600 dark:text-yellow-300 mr-3">
                            <i data-lucide="alert-circle" class="w-4 h-4"></i>
                        </div>
                        <div>
                            <p class="text-gray-800 dark:text-gray-100 font-medium">Reminder: Parent-Teacher meeting next week.</p>
                            <p class="text-gray-500 dark:text-gray-300 text-sm">3 days ago</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <div class="p-2 bg-blue-100 dark:bg-blue-900 rounded-full text-blue-600 dark:text-blue-300 mr-3">
                            <i data-lucide="dollar-sign" class="w-4 h-4"></i>
                        </div>
                        <div>
                            <p class="text-gray-800 dark:text-gray-100 font-medium">Fee payment received from John Doe.</p>
                            <p class="text-gray-500 dark:text-gray-300 text-sm">5 days ago</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <div class="p-2 bg-purple-100 dark:bg-purple-900 rounded-full text-purple-600 dark:text-purple-300 mr-3">
                            <i data-lucide="award" class="w-4 h-4"></i>
                        </div>
                        <div>
                            <p class="text-gray-800 dark:text-gray-100 font-medium">Annual sports day announced.</p>
                            <p class="text-gray-500 dark:text-gray-300 text-sm">1 week ago</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <div class="p-2 bg-indigo-100 dark:bg-indigo-900 rounded-full text-indigo-600 dark:text-indigo-300 mr-3">
                            <i data-lucide="plus-circle" class="w-4 h-4"></i>
                        </div>
                        <div>
                            <p class="text-gray-800 dark:text-gray-100 font-medium">New teacher "Mr. David Lee" joined.</p>
                            <p class="text-gray-500 dark:text-gray-300 text-sm">1 week ago</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- New section for Grades Chart -->
        <section class="mt-6 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4">Student Grades Overview</h3>
            <div class="h-64">
                <canvas id="gradesChart"></canvas>
            </div>
        </section>

        <!-- AI-Powered Tools Section -->
        <section class="mt-6 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4">AI-Powered Tools ✨</h3>
            <div class="space-y-4">
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600">
                    <h4 class="text-lg font-medium text-gray-800 dark:text-gray-100 mb-3">Announcement Draft Generator</h4>
                    <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">Describe the announcement you want to draft, and our AI will help you get started!</p>
                    <textarea id="announcement-prompt" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-600 dark:text-gray-100 mb-4" rows="4" placeholder="e.g., 'Annual Sports Day on Oct 26, mention fun activities and encourage participation.'"></textarea>
                    <button id="generate-announcement-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center">
                        <span id="generate-spinner" class="hidden animate-spin h-5 w-5 mr-3 border-b-2 border-white rounded-full"></span>
                        ✨ Generate Draft
                    </button>
                    <div id="announcement-output-container" class="mt-6 hidden">
                        <h5 class="text-md font-semibold text-gray-800 dark:text-gray-100 mb-2">Generated Draft:</h5>
                        <textarea id="announcement-output" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-700 dark:text-gray-100" rows="8" readonly></textarea>
                        <button id="copy-announcement-btn" class="mt-3 bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-100 font-bold py-2 px-4 rounded-lg transition-colors duration-200">
                            Copy to Clipboard
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick Actions -->
        <section class="mt-6 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4">Quick Actions</h3>
            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4">
                <button class="flex flex-col items-center p-4 bg-indigo-50 dark:bg-indigo-900 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-800 transition-colors duration-200 shadow-sm hover:shadow-md">
                    <i data-lucide="user-plus" class="w-8 h-8 text-indigo-600 dark:text-indigo-300 mb-2"></i>
                    <span class="text-sm font-medium text-gray-700 dark:text-gray-200 text-center">Add New Student</span>
                </button>
                <button class="flex flex-col items-center p-4 bg-green-50 dark:bg-green-900 rounded-lg hover:bg-green-100 dark:hover:bg-green-800 transition-colors duration-200 shadow-sm hover:shadow-md">
                    <i data-lucide="file-text" class="w-8 h-8 text-green-600 dark:text-green-300 mb-2"></i>
                    <span class="text-sm font-medium text-gray-700 dark:text-gray-200 text-center">Generate Report</span>
                </button>
                <button class="flex flex-col items-center p-4 bg-yellow-50 dark:bg-yellow-900 rounded-lg hover:bg-yellow-100 dark:hover:bg-yellow-800 transition-colors duration-200 shadow-sm hover:shadow-md">
                    <i data-lucide="message-square" class="w-8 h-8 text-yellow-600 dark:text-yellow-300 mb-2"></i>
                    <span class="text-sm font-medium text-gray-700 dark:text-gray-200 text-center">Send Announcement</span>
                </button>
                <button class="flex flex-col items-center p-4 bg-red-50 dark:bg-red-900 rounded-lg hover:bg-red-100 dark:hover:bg-red-800 transition-colors duration-200 shadow-sm hover:shadow-md">
                    <i data-lucide="calendar-plus" class="w-8 h-8 text-red-600 dark:text-red-300 mb-2"></i>
                    <span class="text-sm font-medium text-gray-700 dark:text-gray-200 text-center">Schedule Event</span>
                </button>
                <button class="flex flex-col items-center p-4 bg-purple-50 dark:bg-purple-900 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-800 transition-colors duration-200 shadow-sm hover:shadow-md">
                    <i data-lucide="credit-card" class="w-8 h-8 text-purple-600 dark:text-purple-300 mb-2"></i>
                    <span class="text-sm font-medium text-gray-700 dark:text-gray-200 text-center">Manage Fees</span>
                </button>
            </div>
        </section>

        <!-- Upcoming Events -->
        <section class="mt-6 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4">Upcoming Events</h3>
            <div class="space-y-4">
                <div class="flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600">
                    <div class="p-2 bg-blue-100 dark:bg-blue-900 rounded-full text-blue-600 dark:text-blue-300 mr-3">
                        <i data-lucide="calendar-check" class="w-5 h-5"></i>
                    </div>
                    <div>
                        <p class="text-gray-800 dark:text-gray-100 font-medium">Annual Sports Day</p>
                        <p class="text-gray-600 dark:text-gray-300 text-sm">Date: October 26, 2024</p>
                        <p class="text-gray-500 dark:text-gray-400 text-sm">Join us for a day of athletic competition and fun!</p>
                    </div>
                </div>
                <div class="flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600">
                    <div class="p-2 bg-green-100 dark:bg-green-900 rounded-full text-green-600 dark:text-green-300 mr-3">
                        <i data-lucide="book" class="w-5 h-5"></i>
                    </div>
                    <div>
                        <p class="text-gray-800 dark:text-gray-100 font-medium">Parent-Teacher Conference</p>
                        <p class="text-gray-600 dark:text-gray-300 text-sm">Date: November 10, 2024</p>
                        <p class="text-gray-500 dark:text-gray-400 text-sm">Schedule a meeting to discuss student progress.</p>
                    </div>
                </div>
                <div class="flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600">
                    <div class="p-2 bg-purple-100 dark:bg-purple-900 rounded-full text-purple-600 dark:text-purple-300 mr-3">
                        <i data-lucide="graduation-cap" class="w-5 h-5"></i>
                    </div>
                    <div>
                        <p class="text-gray-800 dark:text-gray-100 font-medium">Graduation Ceremony</p>
                        <p class="text-gray-600 dark:text-gray-300 text-sm">Date: December 15, 2024</p>
                        <p class="text-gray-500 dark:text-gray-400 text-sm">Celebrating the achievements of our graduating class.</p>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <!-- Initialize Lucide Icons and Sidebar Logic -->
    <script>
        let attendanceChartInstance;
        let gradesChartInstance;

        function initializeCharts(isDarkMode) {
            const textColor = isDarkMode ? '#e5e7eb' : '#1f2937'; // gray-100 or gray-900
            const gridColor = isDarkMode ? '#4b5563' : '#e5e7eb'; // gray-600 or gray-200

            // Destroy existing chart instances if they exist
            if (attendanceChartInstance) {
                attendanceChartInstance.destroy();
            }
            if (gradesChartInstance) {
                gradesChartInstance.destroy();
            }

            const ctxAttendance = document.getElementById('attendanceChart').getContext('2d');
            attendanceChartInstance = new Chart(ctxAttendance, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                    datasets: [{
                        label: 'Average Monthly Attendance (%)',
                        data: [90, 88, 92, 85, 95, 90, 93],
                        backgroundColor: isDarkMode ? 'rgba(75, 192, 192, 0.8)' : 'rgba(75, 192, 192, 0.6)',
                        borderColor: isDarkMode ? 'rgba(75, 192, 192, 1)' : 'rgba(75, 192, 192, 1)',
                        borderWidth: 1,
                        borderRadius: 5,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                color: textColor
                            },
                            grid: {
                                color: gridColor
                            }
                        },
                        x: {
                            ticks: {
                                color: textColor
                            },
                            grid: {
                                color: gridColor
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                color: textColor
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw + '%';
                                }
                            }
                        }
                    }
                }
            });

            const ctxGrades = document.getElementById('gradesChart').getContext('2d');
            gradesChartInstance = new Chart(ctxGrades, {
                type: 'line',
                data: {
                    labels: ['Math', 'Science', 'History', 'English', 'Art', 'PE'],
                    datasets: [{
                        label: 'Average Grade',
                        data: [85, 90, 78, 88, 92, 80],
                        backgroundColor: isDarkMode ? 'rgba(153, 102, 255, 0.4)' : 'rgba(153, 102, 255, 0.2)',
                        borderColor: isDarkMode ? 'rgba(153, 102, 255, 1)' : 'rgba(153, 102, 255, 1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                color: textColor
                            },
                            grid: {
                                color: gridColor
                            }
                        },
                        x: {
                            ticks: {
                                color: textColor
                            },
                            grid: {
                                color: gridColor
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                color: textColor
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw;
                                }
                            }
                        }
                    }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', (event) => {
            lucide.createIcons();

            const htmlElement = document.documentElement;
            const sidebar = document.getElementById('sidebar');
            const sidebarToggleBtn = document.getElementById('sidebar-toggle-btn'); // Mobile hamburger
            const closeSidebarBtn = document.getElementById('close-sidebar-btn'); // Mobile close
            const sidebarOverlay = document.getElementById('sidebar-overlay');
            const mainContent = document.getElementById('main-content');
            const desktopSidebarToggleBtn = document.getElementById('desktop-sidebar-toggle-btn'); // Desktop toggle
            const desktopSidebarToggleIcon = document.getElementById('desktop-sidebar-toggle-icon'); // Icon for desktop toggle
            const notificationsBellBtn = document.getElementById('notifications-bell-btn');
            const notificationsDropdown = document.getElementById('notifications-dropdown');
            const userAvatarContainer = document.getElementById('user-avatar-container');
            const userDropdown = document.getElementById('user-dropdown');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const darkModeIcon = document.getElementById('dark-mode-icon');

            // LLM Feature Elements
            const announcementPrompt = document.getElementById('announcement-prompt');
            const generateAnnouncementBtn = document.getElementById('generate-announcement-btn');
            const generateSpinner = document.getElementById('generate-spinner');
            const announcementOutputContainer = document.getElementById('announcement-output-container');
            const announcementOutput = document.getElementById('announcement-output');
            const copyAnnouncementBtn = document.getElementById('copy-announcement-btn');


            // Function to save sidebar state to local storage
            function saveSidebarState(isCollapsed) {
                localStorage.setItem('sidebarCollapsed', isCollapsed ? 'true' : 'false');
            }

            // Function to load sidebar state from local storage
            function loadSidebarState() {
                const savedState = localStorage.getItem('sidebarCollapsed');
                return savedState === 'true'; // Returns true if 'true', false otherwise (including null)
            }

            // Function to apply sidebar state (collapsed/expanded)
            function applySidebarState(collapsedState) {
                if (collapsedState) {
                    sidebar.classList.add('collapsed'); // Use 'collapsed' class for desktop
                    desktopSidebarToggleIcon.setAttribute('data-lucide', 'chevron-right');
                } else {
                    sidebar.classList.remove('collapsed'); // Remove 'collapsed' class
                    desktopSidebarToggleIcon.setAttribute('data-lucide', 'chevron-left');
                }
                lucide.createIcons(); // Re-render icon after state change
            }

            // Function to toggle sidebar visibility (mobile vs. desktop behavior)
            function toggleSidebar() {
                if (window.innerWidth < 768) {
                    // Mobile behavior: slide in/out
                    sidebar.classList.toggle('active'); // Toggles 'active' for mobile slide-in/out
                    sidebarOverlay.classList.toggle('active');
                } else {
                    // Desktop behavior: collapse/expand
                    const isCurrentlyCollapsed = sidebar.classList.contains('collapsed');
                    applySidebarState(!isCurrentlyCollapsed); // Toggle and apply
                    saveSidebarState(!isCurrentlyCollapsed); // Save the new state
                }
            }

            // Event listeners for mobile and desktop toggles
            if (sidebarToggleBtn) {
                sidebarToggleBtn.addEventListener('click', toggleSidebar);
            }
            if (closeSidebarBtn) {
                closeSidebarBtn.addEventListener('click', toggleSidebar);
            }
            if (sidebarOverlay) {
                sidebarOverlay.addEventListener('click', toggleSidebar); // Close mobile sidebar when clicking overlay
            }
            if (desktopSidebarToggleBtn) {
                desktopSidebarToggleBtn.addEventListener('click', toggleSidebar);
            }

            // Initial state on load and resize
            function handleResize() {
                if (window.innerWidth >= 768) {
                    // On desktop:
                    // Ensure mobile-specific classes are removed
                    sidebar.classList.remove('active', 'sidebar-mobile');
                    sidebarOverlay.classList.remove('active');

                    // Add desktop-specific classes
                    sidebar.classList.add('sidebar-desktop');
                    mainContent.classList.add('main-content-desktop');

                    // Load state from local storage or default to expanded
                    const savedCollapsedState = loadSidebarState();
                    applySidebarState(savedCollapsedState); // Apply the loaded or default state

                } else {
                    // On mobile:
                    // Ensure desktop-specific classes are removed
                    sidebar.classList.remove('collapsed', 'sidebar-desktop');

                    // Ensure mobile-specific classes are applied for initial hidden state
                    sidebar.classList.add('sidebar-mobile');
                    sidebar.classList.remove('active');
                    sidebarOverlay.classList.remove('active');
                    mainContent.classList.add('main-content-mobile'); // Ensure no margin on mobile
                }
                lucide.createIcons(); // Re-render icons after potential data-lucide changes
            }

            window.addEventListener('resize', handleResize);
            handleResize(); // Call on initial load to set correct state

            // Notifications Dropdown Logic
            if (notificationsBellBtn && notificationsDropdown) {
                notificationsBellBtn.addEventListener('click', (e) => {
                    e.stopPropagation(); // Prevent document click from immediately closing it
                    notificationsDropdown.classList.toggle('active');
                    userDropdown.classList.remove('active'); // Close user dropdown if open
                });

                document.addEventListener('click', (e) => {
                    // Close dropdown if click is outside the dropdown and the bell button
                    if (!notificationsDropdown.contains(e.target) && !notificationsBellBtn.contains(e.target)) {
                        notificationsDropdown.classList.remove('active');
                    }
                });
            }

            // User Avatar Dropdown Logic
            if (userAvatarContainer && userDropdown) {
                userAvatarContainer.addEventListener('click', (e) => {
                    e.stopPropagation(); // Prevent document click from immediately closing it
                    userDropdown.classList.toggle('active');
                    notificationsDropdown.classList.remove('active'); // Close notifications dropdown if open
                });

                document.addEventListener('click', (e) => {
                    // Close dropdown if click is outside the dropdown and the avatar container
                    if (!userDropdown.contains(e.target) && !userAvatarContainer.contains(e.target)) {
                        userDropdown.classList.remove('active');
                    }
                });
            }

            // Dark Mode Logic
            function applyDarkMode(isDark) {
                if (isDark) {
                    htmlElement.classList.add('dark');
                    darkModeIcon.setAttribute('data-lucide', 'sun');
                } else {
                    htmlElement.classList.remove('dark');
                    darkModeIcon.setAttribute('data-lucide', 'moon');
                }
                lucide.createIcons(); // Re-render icon
                initializeCharts(isDark); // Re-initialize charts with new theme
            }

            // Load dark mode preference from local storage
            const savedDarkMode = localStorage.getItem('darkMode');
            if (savedDarkMode === 'true') {
                applyDarkMode(true);
            } else {
                applyDarkMode(false); // Default to light mode if no preference or 'false'
            }

            // Toggle dark mode on button click
            if (darkModeToggle) {
                darkModeToggle.addEventListener('click', () => {
                    const isDark = htmlElement.classList.contains('dark');
                    applyDarkMode(!isDark);
                    localStorage.setItem('darkMode', !isDark);
                });
            }

            // LLM Feature: Generate Announcement Draft
            if (generateAnnouncementBtn) {
                generateAnnouncementBtn.addEventListener('click', async () => {
                    const promptText = announcementPrompt.value.trim();
                    if (!promptText) {
                        alert('Please enter a description for the announcement.');
                        return;
                    }

                    generateSpinner.classList.remove('hidden');
                    generateAnnouncementBtn.disabled = true;
                    announcementOutputContainer.classList.add('hidden');
                    announcementOutput.value = '';

                    try {
                        let chatHistory = [];
                        chatHistory.push({ role: "user", parts: [{ text: `Draft a school announcement based on the following details: "${promptText}". Make it professional, engaging, and suitable for a school audience. Include a clear call to action if appropriate.` }] });
                        const payload = { contents: chatHistory };
                        const apiKey = ""; // Leave as empty string for Canvas to provide
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload),
                        });

                        const result = await response.json();

                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            const text = result.candidates[0].content.parts[0].text;
                            announcementOutput.value = text;
                            announcementOutputContainer.classList.remove('hidden');
                        } else {
                            announcementOutput.value = 'Error: Could not generate announcement. Please try again.';
                            announcementOutputContainer.classList.remove('hidden');
                            console.error('Gemini API response structure unexpected:', result);
                        }
                    } catch (error) {
                        announcementOutput.value = 'Error generating announcement: ' + error.message;
                        announcementOutputContainer.classList.remove('hidden');
                        console.error('Error calling Gemini API:', error);
                    } finally {
                        generateSpinner.classList.add('hidden');
                        generateAnnouncementBtn.disabled = false;
                    }
                });
            }

            // Copy to Clipboard Logic
            if (copyAnnouncementBtn) {
                copyAnnouncementBtn.addEventListener('click', () => {
                    announcementOutput.select();
                    document.execCommand('copy');
                    // Provide visual feedback
                    const originalText = copyAnnouncementBtn.textContent;
                    copyAnnouncementBtn.textContent = 'Copied!';
                    setTimeout(() => {
                        copyAnnouncementBtn.textContent = originalText;
                    }, 2000);
                });
            }

            // Initial chart render based on current mode
            initializeCharts(htmlElement.classList.contains('dark'));
        });
    </script>
</body>
</html>
